<style>
    .margin-left-3{
        margin-left: 3%;
    }
    .img-left{
        float: left;
        width: 220px;
        padding:0 30px;
        margin:30px 0;
    }
    .newRight{
        position: relative;
        float: left;
        width: 300px;
        padding:5px;
    }

    h3{
        margin-top: 1em;
        overflow: hidden;
        white-space: nowrap;
        text-overflow: ellipsis;
    }
    .newDetail{
        color: #999;
        font-size: 13px;
        line-height: 30px;
        margin-top: 1em;
        text-indent: 2em;
    }

    .newsBottom{
        position: absolute;
        bottom: -30px;
    }
    
    .time{
        color: #999;
    }

    .newsBottom a{
        color: rgb(254,115,22);;
        margin-left: 100px;
        text-decoration: underline;
    }
</style>

<h1 class="title text-center color-orange"><span>公司资讯</span></h1>
<div class="tabs">
    <ul>
        <li>
            <a href="/XHL/consultation/dsj/dsj.html">
                <p class="icon iconfont icon-gongsidsj"></p>
                <p>大事记</p>
            </a>
        </li>
        <li>
            <a href="/XHL/consultation/gsdt/gsdt.html">
                <p class="icon iconfont icon-gongsidongtai"></p>
                <p>公司动态</p>
            </a>
        </li>
        <li>
            <a href="/XHL/consultation/gsgg/gsgg.html">
                <p class="icon iconfont icon-gonggao"></p>
                <p>网站公告</p>
            </a>
        </li>
        <li style="display: none;clear: both"></li>
    </ul>
    <div class="tabs-content">
        <div id="tab1" >
            <span></span>
        </div>
        <div id="tab2">
            <span></span>
        </div>
        <div id="tab3">
            <span></span>
        </div>
    </div>
</div>


<script type="text/javascript">

    (function($){
        $.getJSON(dataUrl,function(data){
            var ht = "";
                for(var i=0;i<data.length;i++) {
                    if(i%2 == 0){
                        ht += "<div class='margin-left-3'>";
                    }
                    else{
                        ht += "<div>";
                    }
                    var articleUrl = "/XHL/article/article.html?type=dsj&year="+data[i].year+"&month="+data[i].month+"&day="+data[i].day+"&file="+data[i].articleUrl;
                    ht += "<div class='img-left'><img src='"+data[i].previewImg+"'/></div><div class='newRight'>"
                            + "<h3>"+data[i].title+"</h3>"
                            + "<p class='newDetail'>"+subString(data[i].content)+"</p>"
                            + "<div class='newsBottom'><span class='time'>"+data[i].year+"-"+data[i].month+"-"+data[i].day+"</span>"
                            + "<a href='"+articleUrl+"'><span class='readAll'>阅读全文</span></a></div>"
                            + "</div></div>";
                }
            $(tabId).append(ht);
        },function(){
            alert("出错了");
        });

        function subString(text){
            if(text.length >= 120){
                return text.substr(0,120)+"……";
            }
            return text;
        }

        $.fn.tab = function(){
            var width = Math.round(($(this).width()-10)/3);
            $(this).find("ul>li").width(width);
            $(this).find(".tabs-content>div").width($(this).find("ul").width());
            $("#tab1>span").css("left",width/2-20+"px");
            $("#tab2>span").css({"left":"50%","right":"50%","margin-left":-20+"px"});
            $("#tab3>span").css("right",width/2-20+"px");
//            $(this).find("ul>li").each(function(){
//                $(this).click(function(){
//                    $(this).addClass('active').siblings().removeClass('active');
//                    $($(this).find("a").attr("data-target")).addClass("active").siblings().removeClass("active");
//                })
//            });
        }
    })(jQuery);

    $(document).ready(function(){
        $('.tabs').tab();
    })
</script>